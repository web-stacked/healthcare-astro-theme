---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import seniorCareImage from "../assets/hero-main.jpg";
import professionalCareImage from "../assets/professional-care.jpg";
import teamMemberImage from "../assets/team-member.jpg";
import heroServicesImage from "../assets/hero-services.jpg";
import ServicesIntroSection from "../components/ServicesIntroSection.astro";
import FaqAccordion from "../components/FaqAccordion.astro";
import faqs from "../data/faqs.json";
import NumberCounter from "../components/NumberCounter.astro";
import Button from "../components/Button.astro";
import Icon from "../components/Icon.astro";
import Link from "../components/Link.astro";

interface ServiceCard {
	title: string;
	description: string;
	link: string;
}

const serviceCards: ServiceCard[] = [
	{
		title: "Professional Care Services",
		description:
			"Expert care tailored to your needs in the comfort of your home",
		link: "/services#care",
	},
	{
		title: "Specialized Support",
		description: "Specialized support for complex medical conditions",
		link: "/services#specialty",
	},
	{
		title: "24/7 Support",
		description: "Round-the-clock care and support when you need it most",
		link: "/services#support",
	},
];
---

<Layout
	title="Healthcare at Home | MedCare Solutions"
	description="Quality medical care delivered to your home by licensed professionals. Trusted by families since 2010."
>
	<!-- Hero Section -->
	<section
		class="relative min-h-[70vh] md:min-h-screen lg:min-h-[50vh] flex items-center py-16 md:py-0"
		role="banner"
		aria-label="Hero Section"
	>
		<div class="absolute inset-0 z-0">
			<Image
				src={seniorCareImage}
				alt="Professional healthcare services"
				class="w-full h-full object-cover object-top"
				loading="eager"
				fetchpriority="high"
				width={1920}
				height={1080}
			/>
			<div class="absolute inset-0 bg-gradient-to-r from-black/60 to-black/35">
			</div>
		</div>

		<div class="container relative z-10">
			<div class="max-w-3xl text-white text-center md:text-left mx-auto md:mx-0">
				<h1
					class="text-4xl md:text-[clamp(2rem,4vw,3.5rem)] font-bold leading-[1.1] mb-4 md:mb-6 tracking-tight animate-fade-in"
				>
					Healthcare at Home
				</h1>
				<p
					class="text-lg md:text-[clamp(1rem,2vw,1.25rem)] mb-6 md:mb-10 opacity-95 leading-relaxed font-light max-w-md mx-auto md:mx-0 md:max-w-none"
				>
					Licensed professionals bringing expert medical care<br class="hidden md:inline" />
					directly to your home.
				</p>
				<div class="flex flex-wrap gap-3 md:gap-4 justify-center md:justify-start">
					<Button
						variant="white"
						size="lg"
						href="/contact"
						class="hover:shadow-xl hover:scale-105"
					>
						Get Started
					</Button>
					<Button
						variant="primary"
						size="lg"
						href="/careers"
						class="ring-2 ring-white/20 hover:shadow-xl hover:scale-105"
					>
						Join Our Team
					</Button>
				</div>
			</div>
		</div>
	</section>

	<!-- About Section - Asymmetric editorial layout -->
	<section class="section bg-theme-surface">
		<div class="container">
			<div class="grid lg:grid-cols-2 gap-12 lg:gap-20 items-center">
				<div class="order-2 lg:order-1">
					<p class="text-sm font-medium tracking-widest uppercase text-theme-primary mb-4">
						About Us
					</p>
					<h2 class="mb-6">
						Bringing care to where you are
					</h2>
					<p class="text-theme-text-secondary text-lg leading-relaxed mb-6">
						We specialize in delivering comprehensive medical care directly to your home. No waiting rooms, no travel stressâ€”just quality healthcare in your comfort zone.
					</p>
					<ul class="space-y-5 mb-6">
						{
							serviceCards.map((service) => (
								<li class="flex items-start group">
									<div class="flex-shrink-0 w-7 h-7 rounded-full bg-theme-primary-lighter/20 flex items-center justify-center mr-4 mt-0.5 group-hover:bg-theme-primary transition-colors duration-300">
										<Icon
											name="check"
											size="sm"
											class="text-theme-primary group-hover:text-white transition-colors duration-300"
										/>
									</div>
									<span class="text-theme-text-secondary text-lg">
										{service.description}
									</span>
								</li>
							))
						}
					</ul>
					<div class="text-center md:text-left">
						<Link href="/about">Learn more about us</Link>
					</div>
				</div>
				<div class="order-1 lg:order-2">
					<div class="relative">
						<div class="rounded-2xl overflow-hidden shadow-xl">
							<Image
								src={professionalCareImage}
								alt="Healthcare provider with patient"
								class="w-full h-auto"
								loading="lazy"
							/>
						</div>
						<!-- Decorative accent -->
						<div class="absolute -bottom-4 -left-4 w-24 h-24 bg-theme-primary-lighter/30 rounded-2xl -z-10"></div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Services Section -->
	<section class="section bg-gradient-to-b from-theme-primary-lighter/10 via-theme-primary-lighter/5 to-theme-surface">
		<ServicesIntroSection />
	</section>

	<!-- Statistics Section with Oval Design -->
	<section class="bg-theme-surface pt-4 pb-12 md:pt-8 md:pb-16">
		<div class="container">
			<div class="text-center mb-16">
				<h2 class="text-3xl lg:text-4xl font-bold text-theme-text-primary mb-4">
					Over 15 Years of Excellence
				</h2>
				<p class="text-lg text-theme-text-secondary">
					Trusted healthcare since 2010
				</p>
			</div>

			<div class="mx-auto flex flex-col lg:flex-row items-center gap-16 lg:gap-20">
				<!-- Oval Image Container -->
				<div class="lg:w-1/2">
					<div class="relative">
						<!-- Oval mask for the image -->
						<div class="aspect-[16/9] rounded-[50%] overflow-hidden shadow-2xl ring-1 ring-black/5">
							<Image
								src={teamMemberImage}
								alt="Professional healthcare provider"
								class="w-full h-full object-cover"
								loading="lazy"
							/>

							<!-- Stats Overlay -->
							<div class="absolute inset-0 flex justify-between items-center px-4 stats-container">
								<!-- Left Stat -->
								<div class="stats-circle w-28 h-28 md:w-36 md:h-36 bg-sky-600/95 rounded-full flex flex-col items-center justify-center text-white transform hover:scale-110 transition-all duration-300 shadow-2xl ring-4 ring-white/30">
									<NumberCounter
										number="500+"
										class="text-xl md:text-2xl font-bold"
									/>
									<span class="text-xs mt-1 font-medium">
										Monthly visits
									</span>
								</div>

								<!-- Right Stat -->
								<div class="stats-circle w-28 h-28 md:w-36 md:h-36 bg-orange-500/95 rounded-full flex flex-col items-center justify-center text-white transform hover:scale-110 transition-all duration-300 shadow-2xl ring-4 ring-white/30">
									<NumberCounter
										number="75+"
										class="text-xl md:text-2xl font-bold"
									/>
									<span class="text-xs mt-1 font-medium">
										Professionals
									</span>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Content -->
				<div class="lg:w-1/2 space-y-6">
					<div class="prose prose-lg max-w-none text-theme-text-secondary">
						<p class="text-lg leading-relaxed">
							<strong class="text-theme-text-primary">Founded in 2010,</strong> MedCare
							Solutions has established itself as a trusted provider of comprehensive
							healthcare services. Our commitment to excellence and patient-centered
							care has made us a leader in the healthcare industry.
						</p>
						<p class="text-lg leading-relaxed">
							Today, as a regional healthcare agency, we proudly serve communities across
							the region with over 500 monthly visits and a dedicated team of more than
							75 skilled healthcare professionals who bring compassionate care directly
							to patients' homes.
						</p>
					</div>
					<div class="pt-6">
						<Link href="/about">Learn more about our journey</Link>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- FAQ Section -->
	<section class="section bg-gradient-to-b from-theme-surface-muted to-theme-surface">
		<div class="container">
			<div class="narrow mx-auto">
				<div class="text-center mb-12">
					<p class="text-sm font-medium tracking-widest uppercase text-theme-primary mb-4">
						FAQ
					</p>
					<h2>Common Questions</h2>
				</div>
				<FaqAccordion items={faqs.slice(0, 4)} />
				<div class="text-center mt-10">
					<Link href="/info">View all FAQs</Link>
				</div>
			</div>
		</div>
	</section>

	<!-- CTA Section -->
	<section class="relative py-20 lg:py-28 overflow-hidden">
		<div class="absolute inset-0">
			<Image
				src={heroServicesImage}
				alt="Healthcare environment"
				class="w-full h-full object-cover"
				loading="lazy"
			/>
			<div class="absolute inset-0 bg-theme-primary-darker/90"></div>
		</div>
		<div class="relative container">
			<div class="max-w-2xl mx-auto text-center text-white">
				<h2 class="mb-6">Ready to get started?</h2>
				<p class="text-lg mb-10 text-white/80 font-primary">
					Contact us to discuss how we can support your healthcare needs at home.
				</p>
				<Button variant="white" href="/contact">
					Contact Us
				</Button>
			</div>
		</div>
	</section>
</Layout>

<style>
	.stats-circle {
		opacity: 0;
		animation: fadeInScale 0.8s ease-out forwards;
		animation-play-state: paused;
	}

	@keyframes fadeInScale {
		from {
			opacity: 0;
			transform: scale(0.8);
		}
		to {
			opacity: 1;
			transform: scale(1);
		}
	}
</style>

<script>
	// Single IntersectionObserver for stats animation (memory efficient)
	const statsObserver = new IntersectionObserver(
		(entries) => {
			entries.forEach((entry) => {
				if (entry.isIntersecting) {
					const circles = entry.target.querySelectorAll(".stats-circle");
					circles.forEach((circle) => {
						(circle as HTMLElement).style.animationPlayState = "running";
					});
					statsObserver.unobserve(entry.target);
				}
			});
		},
		{ threshold: 0.2 }
	);

	function initStatsAnimation() {
		const section = document.querySelector(".stats-container");
		if (section) {
			// Reset animation state for view transitions
			const circles = section.querySelectorAll(".stats-circle");
			circles.forEach((circle) => {
				(circle as HTMLElement).style.animationPlayState = "paused";
			});
			statsObserver.observe(section);
		}
	}

	// Run on initial load and after view transitions
	initStatsAnimation();
	document.addEventListener("astro:page-load", initStatsAnimation);
</script>
