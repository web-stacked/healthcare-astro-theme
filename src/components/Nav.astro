---
// Import the components from the astro-navbar npm package
import { Astronav, MenuItems, MenuIcon } from "astro-navbar";
import Icon from "./Icon.astro";
import nav from "../data/navigation.json";
---

<header
  class="sticky top-0 z-50 bg-white/98 backdrop-blur-lg supports-[backdrop-filter]:bg-white/95 border-b border-theme-border shadow-sm"
>
  <div class="container">
    <Astronav>
      <div class="flex items-center justify-between w-full py-4 lg:py-5">
        <!-- Logo -->
        <a href="/" class="shrink-0 flex items-center group relative z-10">
          <div
            class="text-2xl lg:text-3xl font-bold text-theme-primary transition-all duration-300 group-hover:scale-105 group-hover:drop-shadow-md"
          >
            {nav.brand.name}
          </div>
        </a>

        <!-- Desktop Navigation -->
        <nav class="hidden lg:flex items-center gap-2">
          <ul class="flex items-center gap-1.5">
            {
              nav.links.map((link) => (
                <li>
                  <a
                    class="nav-link px-5 py-2.5 rounded-full text-sm font-semibold text-theme-text-secondary hover:text-theme-primary hover:bg-theme-primary/10 transition-all duration-200"
                    href={link.href}
                  >
                    {link.label}
                  </a>
                </li>
              ))
            }
          </ul>

          <!-- Desktop CTA -->
          <div class="ml-4 pl-4 border-l border-theme-border">
            <a
              class="button button-primary text-sm px-6 py-2.5 shadow-sm hover:shadow-md"
              href={nav.cta.href}
            >
              {nav.cta.label}
            </a>
          </div>
        </nav>

        <!-- Mobile Menu Button -->
        <div class="lg:hidden">
          <MenuIcon class="w-6 h-6 text-theme-text-secondary">
            <button
              class="p-2 -mr-2 rounded-lg hover:bg-theme-surface-hover transition-colors"
              aria-label="Toggle menu"
            >
              <svg
                class="w-6 h-6 text-theme-text-secondary"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </MenuIcon>
        </div>
      </div>

      <!-- Mobile Navigation Menu -->
      <MenuItems class="lg:hidden mobile-menu">
        <nav class="bg-white border-t border-theme-border shadow-lg">
          <div class="max-w-md mx-auto px-4 py-6">
            <ul class="space-y-1 mb-6">
              {
                nav.links.map((link) => (
                  <li>
                    <a
                      class="mobile-nav-link group flex items-center px-4 py-3 text-base font-medium text-theme-text-secondary hover:text-theme-primary hover:bg-theme-primary/10 transition-all duration-200 rounded-xl"
                      href={link.href}
                    >
                      <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-theme-surface-hover group-hover:bg-theme-primary/10 transition-colors mr-3 flex items-center justify-center">
                        <Icon
                          name={link.icon as any}
                          size="md"
                          class="text-theme-text-secondary group-hover:text-theme-primary transition-colors"
                        />
                      </div>
                      <span>{link.label}</span>
                    </a>
                  </li>
                ))
              }
            </ul>

            <!-- CTA Button -->
            <div class="pt-4 border-t border-theme-border">
              <a
                class="button button-primary w-full text-center text-base py-4 shadow-md hover:shadow-lg"
                href={nav.cta.href}
              >
                {nav.cta.label}
              </a>
            </div>
          </div>
        </nav>
      </MenuItems>
    </Astronav>
  </div>
</header>

<style>
  .mobile-menu {
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .mobile-nav-link:active {
    transform: scale(0.98);
  }

  /* Active link highlighting */
  .nav-link[aria-current="page"],
  .mobile-nav-link[aria-current="page"] {
    color: var(--color-theme-primary);
    background-color: var(--color-theme-surface-hover);
  }
</style>
